<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Quiz Automotivo - 10 Perguntas</title>
<style>
  :root{
    --accent: #1f8ef1;              /* azul principal (mantido nos dois modos) */
    --accent-2:#7cc7ff;
    --success:#20c997;
    --danger:#ff6b6b;

    /* dark theme defaults */
    --bg: #0f1724;
    --bg-end: #071022;
    --surface: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    --card-bg: rgba(255,255,255,0.02);
    --card-border: rgba(255,255,255,0.03);
    --muted: #9aa4b2;
    --text: #e6eef8;
    --option-bg: rgba(255,255,255,0.10);
    --option-border: rgba(255,255,255,0.08);
    --glass: rgba(255,255,255,0.04);
    --dot-bg: linear-gradient(90deg,var(--accent),var(--accent-2));
    --toggle-bg: transparent;
    --toggle-color: var(--muted);

    --radius: 14px;
    --maxw: 980px;
    --shadow: 0 8px 30px rgba(2,6,23,0.6);
    --transition: 180ms ease;
  }

  /* light theme overrides */
  :root[data-theme="light"]{
    --bg: #f5f8fb;
    --bg-end: #f8fbff;
    --surface: linear-gradient(180deg, rgba(2,6,23,0.02), rgba(2,6,23,0.01));
    --card-bg: #ffffff;                  /* fundo dos cards mais claro */
    --card-border: rgba(2,6,23,0.06);
    --muted: #556177;
    --text: #041223;                     /* pergunta e texto principal */
    --option-bg: #ffffff;                /* fundo das opções */
    --option-border: rgba(2,6,23,0.06);  /* borda das opções */
    --glass: rgba(2,6,23,0.04);
    --dot-bg: linear-gradient(90deg,var(--accent),var(--accent-2));
    --toggle-bg: #eef6ff;
    --toggle-color: #041223;
    --shadow: 0 6px 22px rgba(2,6,23,0.06);
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    /* use --bg and --bg-end so light theme is not overlaid by a dark stop */
    background: linear-gradient(180deg, var(--bg), var(--bg-end) 100%);
    color: var(--text);
    display:flex;
    align-items:center;
    justify-content:center;
    padding:20px;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    transition: background var(--transition), color var(--transition);
  }

  .container{
    width:100%;
    max-width:var(--maxw);
    background:var(--surface);
    border-radius:var(--radius);
    padding:20px;
    box-shadow: var(--shadow);
    display:grid;
    grid-template-columns: 1fr 320px;
    gap:20px;
    align-items:start;
    transition: all var(--transition);
  }

  /* header with theme toggle */
  .topbar{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
    margin-bottom:2px;
  }
  .title{
    font-size:18px;
    font-weight:700;
    letter-spacing:0.2px;
  }
  .meta{
    font-size:13px;
    color:var(--muted);
  }

  /* quiz card */
  .card{
    background: var(--card-bg);
    border-radius:12px;
    padding:18px;
    border:1px solid var(--card-border);
    min-height:320px;
    transition: box-shadow var(--transition), background var(--transition);
    display:flex;
    flex-direction:column;
    gap:12px;
  }

  .header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
  }
  .qnumber{ font-size:13px; color:var(--muted) }

  .progress-wrap{
    background:var(--glass);
    height:10px;
    border-radius:999px;
    overflow:hidden;
    margin:6px 0 8px 0;
  }
  .progress{
    height:100%;
    width:0%;
    background: linear-gradient(90deg, var(--accent), var(--accent-2));
    transition: width .35s ease;
  }

  .question{
    font-size:18px;
    font-weight:700;
    line-height:1.25;
    color:var(--text);
    margin-top:6px;
  }

  .options{
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap:12px;
    margin-top:6px;
  }

  .option{
    background: var(--option-bg);
    border:1px solid var(--option-border);
    padding:14px 12px;
    border-radius:10px;
    cursor:pointer;
    text-align:left;
    font-size:15px;
    transition: transform var(--transition), box-shadow var(--transition), background var(--transition), border-color var(--transition);
    display:flex;
    align-items:center;
    gap:12px;
    user-select:none;
    color: var(--text);
    box-shadow: 0 2px 10px rgba(2,6,23,0.06);
    min-height:64px;
  }
  .option:active{ transform:translateY(1px) }
  .option:hover{ transform: translateY(-6px); box-shadow: 0 14px 34px rgba(2,6,23,0.08) }

  .bullet{
    min-width:44px;
    height:44px;
    border-radius:10px;
    display:inline-grid;
    place-items:center;
    font-weight:700;
    color:#fff;
    background: linear-gradient(90deg,var(--accent),var(--accent-2));
    box-shadow: 0 6px 18px rgba(31,142,241,0.16);
    flex-shrink:0;
    font-size:14px;
  }
  .option .txt{ font-weight:600; color:var(--text) }

  .option.disabled{ pointer-events:none; opacity:0.98; transform:none }
  .option.correct{
    background: linear-gradient(90deg, rgba(32,201,151,0.14), rgba(32,201,151,0.06));
    border-color: rgba(32,201,151,0.24);
    color: #012816;
    box-shadow: 0 8px 26px rgba(32,201,151,0.06);
  }
  .option.correct .bullet{
    background: linear-gradient(90deg, #20c997, #2fe3b1);
    color:#012816;
  }
  .option.incorrect{
    background: linear-gradient(90deg, rgba(255,107,107,0.12), rgba(255,107,107,0.04));
    border-color: rgba(255,107,107,0.24);
    color:#2b0a0a;
    box-shadow: 0 8px 26px rgba(255,107,107,0.04);
  }
  .option.incorrect .bullet{
    background: linear-gradient(90deg, #ff6b6b, #ff8b8b);
    color:#2b0a0a;
  }

  .controls{
    display:flex;
    gap:12px;
    margin-top:12px;
    align-items:center;
    justify-content:flex-end;
  }
  .btn{
    background:var(--accent);
    border:none;
    color:white;
    padding:10px 16px;
    border-radius:10px;
    font-weight:700;
    cursor:pointer;
    font-size:15px;
    transition: transform var(--transition);
  }
  .btn.secondary{
    background:transparent;
    border:1px solid var(--card-border);
    color:var(--muted);
  }
  .btn:active{ transform:translateY(1px) }

  /* side panel */
  .side{
    display:flex;
    flex-direction:column;
    gap:12px;
  }
  .panel{
    background:var(--card-bg);
    border-radius:10px;
    padding:12px;
    border:1px solid var(--card-border);
  }
  .score-big{
    font-size:28px;
    font-weight:800;
    color:var(--accent);
    text-align:center;
  }
  .small{ font-size:13px; color:var(--muted); text-align:center; margin-top:6px }

  .result{
    display:flex;
    flex-direction:column;
    gap:8px;
    align-items:center;
    justify-content:center;
    padding:6px 2px;
  }
  .percent{ font-size:36px; font-weight:800; color:var(--accent) }
  .message{ font-size:14px; color:var(--muted); text-align:center }

  /* header controls (theme toggle + restart on mobile) */
  .header-controls{
    display:flex;
    gap:8px;
    align-items:center;
  }
  .theme-toggle{
    display:inline-flex;
    align-items:center;
    gap:8px;
    background: var(--toggle-bg);
    border:1px solid var(--card-border);
    color: var(--toggle-color);
    padding:8px 10px;
    border-radius:999px;
    cursor:pointer;
    font-weight:700;
    font-size:13px;
  }
  .theme-toggle .dot{
    width:18px; height:18px; border-radius:6px;
    background: var(--dot-bg);
    box-shadow: 0 4px 10px rgba(31,142,241,0.18);
  }

  /* responsive layout improvements */
  @media (max-width:980px){
    .container{ grid-template-columns: 1fr 280px; gap:14px; padding:14px; }
    .side{ width:95%; }
  }
  @media (max-width:780px){
    .container{ grid-template-columns: 1fr; padding:12px; gap:12px; }
    .side{ order:2; width:100%; display:flex; flex-direction:row; gap:10px; }
    .panel{ flex:1; }
  }
  @media (max-width:520px){
    body{ padding:10px; }
    .question{ font-size:16px; }
    .options{ grid-template-columns:1fr; }
    .bullet{ min-width:40px; height:40px }
    .option{ min-height:60px; padding:12px; }
    .controls{ justify-content:stretch; flex-direction:column-reverse; gap:10px; }
    .btn{ width:100%; }
    .header{ gap:8px; }
    .topbar{ flex-direction:column; align-items:flex-start; gap:8px; }
  }

  /* small accessibility focus */
  .option:focus{ outline:3px solid rgba(31,142,241,0.12); outline-offset:4px; }
  .theme-toggle:focus{ outline:3px solid rgba(31,142,241,0.12); outline-offset:4px; }
</style>
</head>
<body>
  <div class="container" role="application" aria-label="Quiz Automotivo" id="app">
    <div class="card" id="card">
      <div class="topbar">
        <div>
          <div class="title">Quiz Automotivo</div>
          <div class="meta">Carros · Motores · Peças</div>
        </div>

        <div class="header-controls">
          <button class="theme-toggle" id="themeToggle" aria-pressed="false" title="Alternar modo claro/escuro">
            <span class="dot" aria-hidden="true"></span>
            <span style="font-weight:700; color:var(--text)">Modo</span>
          </button>
        </div>
      </div>

      <div class="header">
        <div class="qnumber" id="qnum">Pergunta 1 / 10</div>
        <div class="qstatus" id="qstatus" style="font-size:13px;color:var(--muted)">Resposta: —</div>
      </div>

      <div class="progress-wrap" aria-hidden="true">
        <div class="progress" id="progress"></div>
      </div>

      <div>
        <div class="question" id="question">Carregando...</div>

        <div class="options" id="options" role="listbox" aria-label="Opções"></div>

        <div class="controls" style="margin-top:16px;">
          <button class="btn secondary" id="restartBtn" style="display:none">Reiniciar</button>
          <button class="btn" id="nextBtn" disabled>Próxima</button>
        </div>
      </div>
    </div>

    <div class="side" aria-hidden="false">
      <div class="panel" aria-live="polite">
        <div class="small">Pontuação atual</div>
        <div class="score-big" id="scoreBox">0</div>
        <div class="small" id="scoreInfo">0 acertos de 0</div>
      </div>

      <div class="panel">
        <div class="small">Progresso</div>
        <div style="margin-top:10px; display:flex; gap:10px; align-items:center;">
          <div style="flex:1; height:10px; background:var(--glass); border-radius:999px; overflow:hidden;">
            <div id="sideProgress" style="height:100%; width:0%; background:linear-gradient(90deg,var(--accent),var(--accent-2)); transition:width .35s"></div>
          </div>
          <div class="small" id="pct">0%</div>
        </div>
      </div>

      <div class="panel">
        <div class="small">Resultado</div>
        <div id="resultBox" class="result">
          <div class="percent" id="finalPercent">--</div>
          <div class="message" id="finalMessage">Complete o quiz</div>
        </div>
      </div>
    </div>
  </div>

<script>
/* perguntas */
const quiz = [
  {question: "Qual componente converte o movimento alternativo dos pistões em movimento rotativo?", options:["Árvore de cames","Virabrequim","Alternador","Cárter"], answer:1},
  {question: "O que é torque em um motor?", options:["Velocidade máxima","Força de rotação","Quantidade de combustível","Temperatura do óleo"], answer:1},
  {question: "Qual peça evita que as rodas travem durante uma frenagem brusca?", options:["ABS","ECU","Turbo","Diferencial"], answer:0},
  {question: "Para que serve o catalisador?", options:["Aumentar potência","Reduzir emissões","Resfriar motor","Lubrificar o escapamento"], answer:1},
  {question: "Qual componente é responsável pela ignição da mistura em motores a gasolina?", options:["Injetor","Bomba de combustível","Vela de ignição","Filtro de ar"], answer:2},
  {question: "O que significa 'turbo' no contexto de motores?", options:["Sistema de freios","Sistema de sobrealimentação","Tipo de transmissão","Sistema de suspensão"], answer:1},
  {question: "Qual fluido é essencial para a troca de calor no motor?", options:["Óleo do câmbio","Fluido de freio","Líquido de arrefecimento (coolant)","Óleo de transmissão"], answer:2},
  {question: "Qual é a função do diferencial em um veículo?", options:["Controlar consumo","Distribuir torque entre rodas","Medir distância percorrida","Aumentar compressão"], answer:1},
  {question: "O que indica a relação de compressão de um motor?", options:["Tamanho do tanque","Proporção ar/combustível","Relação entre volumes total e da câmara compressa","Diâmetro do pistão"], answer:2},
  {question: "Qual componente reduz vibrações e transmite potência do motor para a transmissão?", options:["Volante do motor (flywheel)","Radiador","Sensor MAP","Eixo cardan"], answer:0}
];

let current = 0;
let score = 0;
let selectedIndex = null;
const total = quiz.length;

const questionEl = document.getElementById('question');
const optionsEl = document.getElementById('options');
const qnumEl = document.getElementById('qnum');
const qstatusEl = document.getElementById('qstatus');
const progressEl = document.getElementById('progress');
const sideProgress = document.getElementById('sideProgress');
const pctEl = document.getElementById('pct');
const scoreBox = document.getElementById('scoreBox');
const scoreInfo = document.getElementById('scoreInfo');
const nextBtn = document.getElementById('nextBtn');
const restartBtn = document.getElementById('restartBtn');
const finalPercent = document.getElementById('finalPercent');
const finalMessage = document.getElementById('finalMessage');
const themeToggle = document.getElementById('themeToggle');
const appRoot = document.documentElement;

/* tema salvo no localStorage (persistência) */
const savedTheme = localStorage.getItem('qa_theme') || 'dark';
appRoot.setAttribute('data-theme', savedTheme);
themeToggle.setAttribute('aria-pressed', savedTheme === 'light' ? 'true' : 'false');

/* inicialização do toggle visual (texto/dot) */
function refreshThemeToggle(){
  const isLight = appRoot.getAttribute('data-theme') === 'light';
  themeToggle.setAttribute('aria-pressed', isLight ? 'true' : 'false');
  // atualiza atributo title para acessibilidade
  themeToggle.title = isLight ? 'Alternar para modo escuro' : 'Alternar para modo claro';
}
refreshThemeToggle();

/* render inicial */
function render(){
  const item = quiz[current];
  qnumEl.textContent = `Pergunta ${current+1} / ${total}`;
  questionEl.textContent = item.question;
  optionsEl.innerHTML = '';
  selectedIndex = null;
  nextBtn.disabled = true;
  nextBtn.textContent = current === total-1 ? 'Finalizar' : 'Próxima';
  qstatusEl.textContent = `Resposta: —`;

  item.options.forEach((opt, i) => {
    const btn = document.createElement('button');
    btn.className = 'option';
    btn.setAttribute('role','option');
    btn.setAttribute('aria-selected','false');
    btn.tabIndex = 0;
    btn.innerHTML = `<div class="bullet">${String.fromCharCode(65+i)}</div><div class="txt">${opt}</div>`;
    btn.addEventListener('click', () => selectOption(btn, i));
    btn.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); selectOption(btn, i); }
    });
    optionsEl.appendChild(btn);
  });

  updateProgress();
  updateSide();
  updateResultPanel();
}

/* seleção e feedback */
function selectOption(button, index){
  if (optionsEl.querySelector('.option.disabled')) return;
  const correct = quiz[current].answer;
  const buttons = Array.from(optionsEl.children);
  buttons.forEach((b, idx) => {
    b.classList.add('disabled');
    b.setAttribute('aria-disabled','true');
    if (idx === correct) b.classList.add('correct');
    if (idx === index && idx !== correct) b.classList.add('incorrect');
  });
  selectedIndex = index;
  nextBtn.disabled = false;

  // update status text
  qstatusEl.textContent = (index === correct) ? 'Resposta correta' : 'Resposta incorreta';
}

nextBtn.addEventListener('click', () => {
  if (selectedIndex === null) return;
  if (selectedIndex === quiz[current].answer) score++;
  current++;
  updateSide();
  if (current < total) {
    render();
    if (window.innerWidth < 640) window.scrollTo({ top: 0, behavior: 'smooth' });
  } else {
    showFinal();
  }
});

restartBtn.addEventListener('click', () => {
  current = 0;
  score = 0;
  restartBtn.style.display = 'none';
  nextBtn.style.display = 'inline-block';
  render();
  if (window.innerWidth < 640) window.scrollTo({ top: 0, behavior: 'smooth' });
});

function updateProgress(){
  const pct = current >= total ? 100 : Math.round((current/total)*100);
  progressEl.style.width = `${pct}%`;
  sideProgress.style.width = `${pct}%`;
  pctEl.textContent = `${pct}%`;
}

function updateSide(){
  scoreBox.textContent = score;
  scoreInfo.textContent = `${score} acertos de ${current}`;
  updateProgress();
}

function showFinal(){
  const pct = Math.round((score/total)*100);
  progressEl.style.width = `100%`;
  sideProgress.style.width = `100%`;
  pctEl.textContent = `${pct}%`;
  finalPercent.textContent = `${pct}%`;
  const msg = pct === 100 ? 'Perfeito! Conhecimento de especialista.' :
              pct >= 80 ? 'Ótimo resultado!' :
              pct >= 50 ? 'Bom — continue praticando.' :
              'Precisa estudar mais. Continue praticando.';
  finalMessage.textContent = msg;
  questionEl.textContent = 'Quiz finalizado!';
  optionsEl.innerHTML = '';
  nextBtn.style.display = 'none';
  restartBtn.style.display = 'inline-block';
  updateSide();
  if (window.innerWidth < 640) window.scrollTo({ top: 0, behavior: 'smooth' });
}

function updateResultPanel(){
  finalPercent.textContent = '--';
  finalMessage.textContent = 'Complete o quiz';
}

/* troca de tema (dark <-> light) */
themeToggle.addEventListener('click', () => {
  const current = appRoot.getAttribute('data-theme') === 'light' ? 'light' : 'dark';
  const next = current === 'light' ? 'dark' : 'light';
  appRoot.setAttribute('data-theme', next);
  localStorage.setItem('qa_theme', next);
  refreshThemeToggle();
});

/* keyboard shortcut: T para alternar tema (ajuda acessibilidade) */
document.addEventListener('keydown', (e) => {
  if ((e.key === 't' || e.key === 'T') && (document.activeElement.tagName !== 'INPUT' && document.activeElement.tagName !== 'TEXTAREA')) {
    themeToggle.click();
  }
});

/* inicializa UI */
render();
</script>
</body>
</html>
